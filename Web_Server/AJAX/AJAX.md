# AJAX

> Asynchronous JavaScript and XML



* 인스타그램, 페이스북과 같은 사이트 만드는데 사용
* 웹: 동기 통신
  * 요청을 보내면 응답을 받을 때 까지 기다림

* AJAX를 이용하면 동기, 비동기 통신을 선택할 수 있음
  * 요청을 보내고 다른 일을 할 수 이음

* 주로 JSON 형식으로 주고받음
  * XML도 가능



---



#### 고전적 웹 통신

* 동기 통신
* 요청을 보내면 응담을 받을 때까지 대기
* 웹페이지의 일부분을 갱신하기 위해서는 페이지 전체를 다시 로드해야 함

#### AJAX를 이용한 웹 통신

* 동기, 비동기 통신 선택 가능
* 요청을 보내고 다른 일을 할 수 있음
* **재로드(refresh 재갱신) 하지 않고 웹페이지의 일부분만을 갱신**하여 웹서버와 데이터를 교환
* 즉, **빠르게 동적 웹페이지를 생성하는 기술**

* 고전적 웹 통신에서 웹서버가 했던 일의 일부분을 AJAX 엔진이 대신해서 해줌
  * 웹서버는 Data만 AJAX 엔진에 전달, 그 후 처리는 AJAX 엔진이



---



## AJAX의 동작 과정

1. 이벤트 발생에 의해 이벤트 핸들러 역할의 JavaScript 함수를 호출
2. 핸들러 함수에서 XMLHttpRequest 객체를 생성하고, 요청이 종료되었을 때 처리할 기능을 콜백함수로 만들어 등록
3. XMLHttpRequest 객체를 통해 서버에 요청을 보냄
4. 요청 받은 서버는 요청 결과를 적당한 데이터로 구성하여 응답
5. XMLHttpRequest 객체에 의해 등록된 콜백 함수를 호출하여 응답 결과를 현재 웹 페이지에 반영



---



## AJAX 프로그래밍 핵심 내용

1. JSON(XML) 형식으로 응답하는 뷰를 준비해야 함.

   * 템플릿을 거치지 않고 뷰가 직접 응답
   * 템플릿을 거치지 않고 = html 파일 없음

2. AJAX 요청 구현 방법 (2가지)

   * JavaScript 사용

     ```javascript
     var xhr = new XMLHttpRequest() // XMLHttpRequest객체 생성
     xhr.onload = 함수 // 이벤트 핸들러 등록
     xhr.open("GET", 대상URL, true)
     xhr.send()
     ```

     * true : 비동기 통신, default 값

   * jQuery API 사용

     ```
     $.getJSON("대상URL", 함수) // 대부분 아래보다 이것을 사용
     ```

     ```
     $.ajax({...............})
     ```

     